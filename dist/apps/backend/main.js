(()=>{"use strict";var e={564:(e,t,a)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AppController=void 0;const o=a(752),d=a(481),i=a(676);let n=class{constructor(e){this.appService=e}getData(){return this.appService.getData()}};o.__decorate([(0,d.Get)(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],n.prototype,"getData",null),n=o.__decorate([(0,d.Controller)(),o.__metadata("design:paramtypes",["function"==typeof(r=void 0!==i.AppService&&i.AppService)?r:Object])],n),t.AppController=n},247:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AppModule=void 0;const r=a(752),o=a(96),d=a(481),i=a(161),n=a(17),p=a(564),s=a(676),_=a(207),l=a(82),c=a(244),u=a(114),y=a(470),m=process.env.MODE,v="staging"!==m&&"production"!==m;console.log(__dirname,process.cwd());let g=class{};g=r.__decorate([(0,d.Module)({imports:[i.GraphQLModule.forRoot({driver:o.ApolloDriver,debug:v,playground:v,sortSchema:!0,useGlobalPrefix:!0,autoSchemaFile:v?(0,n.join)(process.cwd(),"apps/backend/src/schema.gql"):(0,n.join)(__dirname,"schema.gql")})],controllers:[p.AppController],providers:[s.AppService,_.PrismaService,l.ActivityResolver,c.ProjectResolver,u.TodoResolver,y.UserResolver]})],g),t.AppModule=g},676:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AppService=void 0;const r=a(752),o=a(481);let d=class{getData(){return{message:"Welcome to backend!"}}};d=r.__decorate([(0,o.Injectable)()],d),t.AppService=d},207:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PrismaService=void 0;const r=a(752),o=a(481),d=a(524);let i=class extends d.PrismaClient{onModuleInit(){return r.__awaiter(this,void 0,void 0,(function*(){yield this.$connect()}))}enableShutdownHooks(e){return r.__awaiter(this,void 0,void 0,(function*(){this.$on("beforeExit",(()=>r.__awaiter(this,void 0,void 0,(function*(){yield e.close()}))))}))}};i=r.__decorate([(0,o.Injectable)()],i),t.PrismaService=i},759:(e,t,a)=>{var r,o,d;Object.defineProperty(t,"__esModule",{value:!0}),t.Activity=void 0;const i=a(752),n=a(161),p=a(597);let s=class{};i.__decorate([(0,n.Field)((()=>n.Int),{nullable:!1}),i.__metadata("design:type",Number)],s.prototype,"id",void 0),i.__decorate([(0,n.Field)((()=>String),{nullable:!1}),i.__metadata("design:type",String)],s.prototype,"text",void 0),i.__decorate([(0,n.Field)((()=>Number),{nullable:!1}),i.__metadata("design:type",Number)],s.prototype,"todoId",void 0),i.__decorate([(0,n.Field)((()=>p.Todo),{nullable:!1}),i.__metadata("design:type","function"==typeof(r=void 0!==p.Todo&&p.Todo)?r:Object)],s.prototype,"todo",void 0),i.__decorate([(0,n.Field)((()=>Date),{nullable:!1}),i.__metadata("design:type","function"==typeof(o="undefined"!=typeof Date&&Date)?o:Object)],s.prototype,"updatedAt",void 0),i.__decorate([(0,n.Field)((()=>Date),{nullable:!1}),i.__metadata("design:type","function"==typeof(d="undefined"!=typeof Date&&Date)?d:Object)],s.prototype,"createdAt",void 0),s=i.__decorate([(0,n.ObjectType)()],s),t.Activity=s},911:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Status=void 0;const r=a(161);var o;!function(e){e.OPEN="OPEN",e.CLOSED="CLOSED",e.COMPLETED="COMPLETED"}(o=t.Status||(t.Status={})),(0,r.registerEnumType)(o,{name:"Status",description:"Todo Status"})},219:(e,t,a)=>{var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.Project=void 0;const d=a(752),i=a(161),n=a(597);let p=class{};d.__decorate([(0,i.Field)((()=>Number),{nullable:!1}),d.__metadata("design:type",Number)],p.prototype,"open",void 0),d.__decorate([(0,i.Field)((()=>Number),{nullable:!1}),d.__metadata("design:type",Number)],p.prototype,"closed",void 0),d.__decorate([(0,i.Field)((()=>Number),{nullable:!1}),d.__metadata("design:type",Number)],p.prototype,"completed",void 0),p=d.__decorate([(0,i.ObjectType)()],p);let s=class{};d.__decorate([(0,i.Field)((()=>i.Int),{nullable:!1}),d.__metadata("design:type",Number)],s.prototype,"id",void 0),d.__decorate([(0,i.Field)((()=>String),{nullable:!1}),d.__metadata("design:type",String)],s.prototype,"name",void 0),d.__decorate([(0,i.Field)((()=>String),{nullable:!1}),d.__metadata("design:type",String)],s.prototype,"description",void 0),d.__decorate([(0,i.Field)((()=>Date),{nullable:!1}),d.__metadata("design:type","function"==typeof(r="undefined"!=typeof Date&&Date)?r:Object)],s.prototype,"updatedAt",void 0),d.__decorate([(0,i.Field)((()=>Date),{nullable:!1}),d.__metadata("design:type","function"==typeof(o="undefined"!=typeof Date&&Date)?o:Object)],s.prototype,"createdAt",void 0),d.__decorate([(0,i.Field)((()=>[n.Todo]),{nullable:!1}),d.__metadata("design:type",Array)],s.prototype,"todo",void 0),d.__decorate([(0,i.Field)((()=>p),{nullable:!1}),d.__metadata("design:type",p)],s.prototype,"counts",void 0),s=d.__decorate([(0,i.ObjectType)()],s),t.Project=s},597:(e,t,a)=>{var r,o,d,i,n,p;Object.defineProperty(t,"__esModule",{value:!0}),t.Todo=void 0;const s=a(752),_=a(161),l=a(759),c=a(911),u=a(219),y=a(10);let m=r=class{};s.__decorate([(0,_.Field)((()=>_.Int),{nullable:!1}),s.__metadata("design:type",Number)],m.prototype,"id",void 0),s.__decorate([(0,_.Field)((()=>String),{nullable:!1}),s.__metadata("design:type",String)],m.prototype,"name",void 0),s.__decorate([(0,_.Field)((()=>[l.Activity]),{nullable:!1}),s.__metadata("design:type",Array)],m.prototype,"activities",void 0),s.__decorate([(0,_.Field)((()=>Number)),s.__metadata("design:type",Number)],m.prototype,"progress",void 0),s.__decorate([(0,_.Field)((()=>Date),{nullable:!1}),s.__metadata("design:type","function"==typeof(o="undefined"!=typeof Date&&Date)?o:Object)],m.prototype,"updatedAt",void 0),s.__decorate([(0,_.Field)((()=>Date),{nullable:!1}),s.__metadata("design:type","function"==typeof(d="undefined"!=typeof Date&&Date)?d:Object)],m.prototype,"createdAt",void 0),s.__decorate([(0,_.Field)((()=>Number),{nullable:!1}),s.__metadata("design:type",Number)],m.prototype,"userId",void 0),s.__decorate([(0,_.Field)((()=>y.User),{nullable:!1}),s.__metadata("design:type","function"==typeof(i=void 0!==y.User&&y.User)?i:Object)],m.prototype,"user",void 0),s.__decorate([(0,_.Field)((()=>c.Status),{nullable:!1}),s.__metadata("design:type","function"==typeof(n=void 0!==c.Status&&c.Status)?n:Object)],m.prototype,"status",void 0),s.__decorate([(0,_.Field)((()=>Number),{nullable:!1}),s.__metadata("design:type",Number)],m.prototype,"projectId",void 0),s.__decorate([(0,_.Field)((()=>r),{nullable:!1}),s.__metadata("design:type","function"==typeof(p=void 0!==u.Project&&u.Project)?p:Object)],m.prototype,"project",void 0),m=r=s.__decorate([(0,_.ObjectType)()],m),t.Todo=m},10:(e,t,a)=>{var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;const d=a(752),i=a(161),n=a(597);let p=class{};d.__decorate([(0,i.Field)((()=>i.Int),{nullable:!1}),d.__metadata("design:type",Number)],p.prototype,"id",void 0),d.__decorate([(0,i.Field)((()=>String),{nullable:!1}),d.__metadata("design:type",String)],p.prototype,"name",void 0),d.__decorate([(0,i.Field)((()=>[n.Todo]),{nullable:!1}),d.__metadata("design:type",Array)],p.prototype,"todo",void 0),d.__decorate([(0,i.Field)((()=>Date),{nullable:!1}),d.__metadata("design:type","function"==typeof(r="undefined"!=typeof Date&&Date)?r:Object)],p.prototype,"updatedAt",void 0),d.__decorate([(0,i.Field)((()=>Date),{nullable:!1}),d.__metadata("design:type","function"==typeof(o="undefined"!=typeof Date&&Date)?o:Object)],p.prototype,"createdAt",void 0),p=d.__decorate([(0,i.ObjectType)()],p),t.User=p},82:(e,t,a)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityResolver=void 0;const o=a(752),d=a(161),i=a(207),n=a(759);let p=class{constructor(e){this.prisma=e}createActivity(e,t){return o.__awaiter(this,void 0,void 0,(function*(){return this.prisma.activity.create({data:{text:t,todoId:e}})}))}updateActivity(e,t){return o.__awaiter(this,void 0,void 0,(function*(){return this.prisma.activity.update({where:{id:e},data:{text:t}})}))}};o.__decorate([(0,d.Mutation)((()=>n.Activity)),o.__param(0,(0,d.Args)("todoId",{type:()=>d.Int,nullable:!1})),o.__param(1,(0,d.Args)("text",{type:()=>String,nullable:!1})),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Number,String]),o.__metadata("design:returntype",Promise)],p.prototype,"createActivity",null),o.__decorate([(0,d.Mutation)((()=>n.Activity)),o.__param(0,(0,d.Args)("id",{type:()=>d.Int,nullable:!1})),o.__param(1,(0,d.Args)("text",{type:()=>String,nullable:!1})),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Number,String]),o.__metadata("design:returntype",Promise)],p.prototype,"updateActivity",null),p=o.__decorate([(0,d.Resolver)((()=>n.Activity)),o.__metadata("design:paramtypes",["function"==typeof(r=void 0!==i.PrismaService&&i.PrismaService)?r:Object])],p),t.ActivityResolver=p},244:(e,t,a)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectResolver=void 0;const o=a(752),d=a(161),i=a(207),n=a(219);let p=class{constructor(e){this.prisma=e}allProjects(){return o.__awaiter(this,void 0,void 0,(function*(){return this.prisma.project.findMany({orderBy:{updatedAt:"desc"},select:{id:!0,name:!0,description:!0,updatedAt:!0,createdAt:!0,todo:{select:{id:!0,name:!0,progress:!0,user:{select:{id:!0,name:!0,updatedAt:!0,createdAt:!0}},activities:{select:{id:!0,text:!0,updatedAt:!0,createdAt:!0}},status:!0,updatedAt:!0,createdAt:!0}}}})}))}createProject(e,t){return o.__awaiter(this,void 0,void 0,(function*(){return this.prisma.project.create({data:{name:e,description:t},select:{id:!0,name:!0,description:!0,updatedAt:!0,createdAt:!0}})}))}updateProjectName(e,t){return o.__awaiter(this,void 0,void 0,(function*(){return this.prisma.project.update({where:{id:e},data:{name:t}})}))}updateProjectDescription(e,t){return o.__awaiter(this,void 0,void 0,(function*(){return this.prisma.project.update({where:{id:e},data:{description:t}})}))}};o.__decorate([(0,d.Query)((()=>[n.Project])),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",Promise)],p.prototype,"allProjects",null),o.__decorate([(0,d.Mutation)((()=>n.Project)),o.__param(0,(0,d.Args)("name",{type:()=>String,nullable:!1})),o.__param(1,(0,d.Args)("description",{type:()=>String,defaultValue:""})),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[String,String]),o.__metadata("design:returntype",Promise)],p.prototype,"createProject",null),o.__decorate([(0,d.Mutation)((()=>n.Project)),o.__param(0,(0,d.Args)("id",{type:()=>d.Int,nullable:!1})),o.__param(1,(0,d.Args)("name",{type:()=>String,nullable:!1})),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Number,String]),o.__metadata("design:returntype",Promise)],p.prototype,"updateProjectName",null),o.__decorate([(0,d.Mutation)((()=>n.Project)),o.__param(0,(0,d.Args)("id",{type:()=>d.Int,nullable:!1})),o.__param(1,(0,d.Args)("description",{type:()=>String,nullable:!1})),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Number,String]),o.__metadata("design:returntype",Promise)],p.prototype,"updateProjectDescription",null),p=o.__decorate([(0,d.Resolver)((()=>n.Project)),o.__metadata("design:paramtypes",["function"==typeof(r=void 0!==i.PrismaService&&i.PrismaService)?r:Object])],p),t.ProjectResolver=p},114:(e,t,a)=>{var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.TodoResolver=void 0;const d=a(752),i=a(161),n=a(207),p=a(911),s=a(597);let _=class{constructor(e){this.prisma=e}allTodos(){return d.__awaiter(this,void 0,void 0,(function*(){return this.prisma.todo.findMany({orderBy:{updatedAt:"desc"}})}))}createTodo(e,t){return d.__awaiter(this,void 0,void 0,(function*(){return this.prisma.todo.create({data:{name:e,projectId:t,progress:0,status:"OPEN",userId:1}})}))}updateTodoName(e,t){return d.__awaiter(this,void 0,void 0,(function*(){return this.prisma.todo.update({where:{id:e},data:{name:t}})}))}updateTodoDetail(e,t,a){return d.__awaiter(this,void 0,void 0,(function*(){return this.prisma.todo.update({where:{id:e},data:{status:a,progress:t}})}))}};d.__decorate([(0,i.Query)((()=>[s.Todo])),d.__metadata("design:type",Function),d.__metadata("design:paramtypes",[]),d.__metadata("design:returntype",Promise)],_.prototype,"allTodos",null),d.__decorate([(0,i.Mutation)((()=>s.Todo)),d.__param(0,(0,i.Args)("name",{type:()=>String,nullable:!1})),d.__param(1,(0,i.Args)("projectId",{type:()=>i.Int,nullable:!1})),d.__metadata("design:type",Function),d.__metadata("design:paramtypes",[String,Number]),d.__metadata("design:returntype",Promise)],_.prototype,"createTodo",null),d.__decorate([(0,i.Mutation)((()=>s.Todo)),d.__param(0,(0,i.Args)("id",{type:()=>i.Int,nullable:!1})),d.__param(1,(0,i.Args)("name",{type:()=>String,nullable:!1})),d.__metadata("design:type",Function),d.__metadata("design:paramtypes",[Number,String]),d.__metadata("design:returntype",Promise)],_.prototype,"updateTodoName",null),d.__decorate([(0,i.Mutation)((()=>s.Todo)),d.__param(0,(0,i.Args)("id",{type:()=>i.Int,nullable:!1})),d.__param(1,(0,i.Args)("progress",{type:()=>i.Float,nullable:!1})),d.__param(2,(0,i.Args)("status",{type:()=>p.Status,nullable:!1})),d.__metadata("design:type",Function),d.__metadata("design:paramtypes",[Number,Number,"function"==typeof(o=void 0!==p.Status&&p.Status)?o:Object]),d.__metadata("design:returntype",Promise)],_.prototype,"updateTodoDetail",null),_=d.__decorate([(0,i.Resolver)((()=>s.Todo)),d.__metadata("design:paramtypes",["function"==typeof(r=void 0!==n.PrismaService&&n.PrismaService)?r:Object])],_),t.TodoResolver=_},470:(e,t,a)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.UserResolver=void 0;const o=a(752),d=a(161),i=a(207),n=a(10);let p=class{constructor(e){this.prisma=e}createUser(e){return o.__awaiter(this,void 0,void 0,(function*(){return this.prisma.user.create({data:{name:e}})}))}};o.__decorate([(0,d.Mutation)((()=>n.User)),o.__param(0,(0,d.Args)("name",{type:()=>String,nullable:!1})),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[String]),o.__metadata("design:returntype",Promise)],p.prototype,"createUser",null),p=o.__decorate([(0,d.Resolver)((()=>n.User)),o.__metadata("design:paramtypes",["function"==typeof(r=void 0!==i.PrismaService&&i.PrismaService)?r:Object])],p),t.UserResolver=p},96:e=>{e.exports=require("@nestjs/apollo")},481:e=>{e.exports=require("@nestjs/common")},143:e=>{e.exports=require("@nestjs/core")},161:e=>{e.exports=require("@nestjs/graphql")},524:e=>{e.exports=require("@prisma/client")},752:e=>{e.exports=require("tslib")},17:e=>{e.exports=require("path")}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var d=t[r]={exports:{}};return e[r](d,d.exports,a),d.exports}var r={};(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0});const t=a(752),o=a(481),d=a(143),i=a(247);!function(){t.__awaiter(this,void 0,void 0,(function*(){const e=yield d.NestFactory.create(i.AppModule);e.setGlobalPrefix("api");const t=process.env.PORT||3333;yield e.listen(t),o.Logger.log(`🚀 Application is running on: http://localhost:${t}/api`)}))}()})();var o=exports;for(var d in r)o[d]=r[d];r.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();
//# sourceMappingURL=main.js.map